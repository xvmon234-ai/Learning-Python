# 02. Data Exploration & Preprocessing: Credit Card Fraud Detection

## 1. 개요
이번 단계에서는 모델링에 앞서 데이터를 탐색하고, 이상 거래 탐지 모델을 성공적으로 구축하기 위한 전처리 작업을 수행했습니다. 특히, 데이터의 **클래스 불균형 문제**를 심층적으로 분석하고 해결하는 데 중점을 두었습니다.

---

## 2. 데이터 탐색적 분석 (EDA)

### **2.1. 클래스 불균형 문제 파악**
신용카드 거래 데이터는 정상 거래(Class 0)가 **99.83%**, 이상 거래(Class 1)가 **0.17%**를 차지하는 극심한 클래스 불균형 상태입니다. 이러한 불균형 데이터로 모델을 학습시키면, 모델은 이상 거래 패턴을 제대로 배우지 못하고 대부분의 거래를 정상으로 예측하는 경향을 보입니다. 결과적으로 모델의 정확도(Accuracy)는 높게 나오지만, 실제 비즈니스 목표인 **이상 거래 탐지** 능력은 매우 낮아집니다. 이를 해결하기 위해 **정밀도(Precision)**와 **재현율(Recall)** 등 다각적인 평가 지표를 활용해야 합니다.

### **2.2. 유의미한 피처 패턴 발견**
데이터 분석을 통해 다음과 같은 패턴을 발견했습니다.

* **`Time` 피처**: 이상 거래는 하루 24시간 동안 고르게 발생하는 정상 거래와 달리, 특정 시간대(약 4만 초, 12만 초 지점)에 집중적으로 발생했습니다. 이 시간적 패턴은 모델이 이상 거래를 분류하는 중요한 단서가 될 것입니다.
* **`Amount` 피처**: 대부분의 거래 금액이 소액에 집중되어 한쪽으로 치우친 분포를 보였습니다. 이러한 분포는 모델 학습에 방해가 될 수 있어 **로그 변환($log(1+x)$)**을 적용하여 데이터를 정규분포에 가깝게 만들었습니다.

---

## 3. 데이터 전처리 전략 및 이론적 배경

### **3.1. 피처 스케일링**
`Time`과 `Amount` 피처는 다른 `V1`~`V28` 피처들과 스케일이 크게 다릅니다. 이는 모델이 스케일이 큰 피처에 과도하게 영향을 받아 성능이 저하되는 문제를 야기할 수 있습니다. 이를 방지하기 위해 **StandardScaler**를 사용하여 모든 피처의 평균을 0, 표준편차를 1로 맞춰 데이터의 스케일을 통일했습니다.

### **3.2. 훈련/테스트 데이터 분할의 중요성**
모델 학습 전, 전체 데이터를 **훈련(Train) 세트**와 **테스트(Test) 세트**로 분할했습니다.
* **훈련 데이터**: 모델이 이상 거래와 정상 거래 패턴을 학습하는 데 사용됩니다.
* **테스트 데이터**: 모델이 학습하지 않은 새로운 데이터에 대해 얼마나 잘 작동하는지 성능을 평가하는 데 사용됩니다.
훈련과 테스트 데이터를 분리함으로써, 모델의 성능이 특정 데이터에만 잘 맞는 **과적합(Overfitting)** 문제를 방지하고 일반화 성능을 객관적으로 평가할 수 있습니다.

### **3.3. 클래스 불균형 해소 전략 비교 및 선택**
데이터의 심각한 불균형 문제를 해결하기 위해 **샘플링 기법**을 고려했습니다. 대표적인 방법에는 **언더샘플링(Under-sampling)**과 **오버샘플링(Over-sampling)**이 있습니다.

* **언더샘플링**: 다수 클래스(정상 거래)의 샘플 수를 소수 클래스(이상 거래)에 맞춰 줄이는 방법입니다. 이 방법은 학습 속도가 빠르지만, 중요한 정상 거래 패턴을 가진 데이터를 손실할 위험이 있어 모델의 성능이 저하될 수 있습니다.
* **오버샘플링**: 소수 클래스(이상 거래)의 샘플 수를 늘리는 방법입니다. 이 방법은 데이터 손실이 없다는 장점이 있지만, 단순 복제 시 과적합이 발생할 수 있습니다.

이 프로젝트에서는 단순히 소수 클래스를 복제하는 것이 아니라, 기존 소수 클래스 데이터를 기반으로 새로운 가상 데이터를 생성하는 **SMOTE(Synthetic Minority Over-sampling Technique)**를 선택했습니다. SMOTE는 **데이터 손실 없이** 이상 거래의 다양한 패턴을 모델에 학습시킬 수 있어, 불균형 데이터 문제 해결에 가장 효과적인 방법으로 판단했습니다.
